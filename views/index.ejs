<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nir's Media Station - bo√Æte petite üéµ</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        :root {
            --bg: #121212;
            --card-bg: #1e1e1e;
            --primary: #1DB954;
            --waves-track-bg: #2d2d2d;
            --text: #ffffff;
            --success-bg: #1DB954;  /* Spotify green */
            --failure-bg: #ff4444;  /* Bright red */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #0f0f0f, #222);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

/* gpt0214: highlight while auto-scrolling-to-top (force override of gradient/canvas) */
html.scrolling-to-top,
body.scrolling-to-top {
    background-color: yellow !important;
    background-image: none !important;
}


        header {

            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            padding: 0; 
            background: rgba(0,0,0,0.5);
            min-height: 80px;
            flex-shrink: 0;
            gap: 6px;
            padding: 0;
        }
        .header-inner {
          max-width: 800px;      /* must match .container max-width */
          width: 100%;
          padding: 20px 20px 10px 20px; /* match your desired header padding */
          box-sizing: border-box;
          margin: 0 auto;
        }
        .title-section {
            width: 100%;
            min-width: 0;
            margin-left: 0;
            padding-left: 0;
        }

        h1 {
            margin: 0;
            font-size: 2rem;
            font-weight: 700;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Ensure clock and title share the exact left edge */
        #clock {
            font-size: 6rem;
            font-weight: bold;
            color: yellow;
            white-space: nowrap;
            margin: 0;
            padding: 0;
        }

        .title-section h1 {
            margin-top: 0;
            margin-bottom: 4px;
        }

        #now-playing {
            margin-top: 4px;
            margin-bottom: 6px;
            font-size: 1.05rem;
            color: #ddd;
        }

        /* Marquee */

/* Marquee (iOS Chrome/Safari safe) */
i#np-track {
  overflow: hidden;
  white-space: nowrap;
  font-weight: 600;
  max-width: 100%;
}

#np-track .np-track-text {
  display: inline-block;
  white-space: nowrap;
}

/* only animate when JS adds .marquee */
#np-track.marquee .np-track-text {
  will-change: transform;
  transform: translate3d(100%, 0, 0);
  -webkit-transform: translate3d(100%, 0, 0);
  animation: marquee 12s linear infinite;
  -webkit-animation: marquee 12s linear infinite;
}

@keyframes marquee {
  from { transform: translate3d(100%, 0, 0); }
  to   { transform: translate3d(-100%, 0, 0); }
}

@-webkit-keyframes marquee {
  from { -webkit-transform: translate3d(100%, 0, 0); }
  to   { -webkit-transform: translate3d(-100%, 0, 0); }
}




        #np-track,
        #np-meta {
            line-height: 1.25;
        }

        .container {
            flex: 1;
            max-width: 800px;
            width: 100%;
            margin: 0;
            padding: 6px 20px 20px 20px; /* reduced top padding */
            padding-right: 20px;
            display: grid;
            gap: 16px;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            margin: 0 auto;
            align-self: stretch; /* or remove align-self entirely */

        }

        .panel {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
        }

        .panel.waves, .panel.source {
            background: var(--waves-track-bg);
        }

        .panel h2 {
            margin: 0 0 10px;
            font-size: 1.4rem;
            text-align: left;
            color: var(--primary);
        }

        button {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 12px;
            padding: 16px;
            font-size: 1.2rem;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.4s ease;
            color: white;
            width: 100%;
            box-sizing: border-box;
        }

        button:hover {
            opacity: 0.9;
            transform: scale(1.03);
        }

        button.large {
            font-size: 1.4rem;
            padding: 20px;
        }

        /* Volume gradient reds */
        button#low { background: #ffdddd; }
        button#medium { background: #ffaaaa; }
        button#high { background: #ee0000; }
        button#superhigh { background: #cc0000; }

        button#mute { background: #4488ff; }

        .panel.waves button.large,
        .panel.source button.large {
            background: var(--primary);
        }

        button:not(#low):not(#medium):not(#high):not(#superhigh):not(#mute):not(.panel.waves button.large):not(.panel.source button.large) {
            background: #ff4500;
        }

        button svg {
            width: 32px;
            height: 32px;
            fill: currentColor;
            flex-shrink: 0;
        }

        /* Transient feedback overlay on the pressed button */
        button.feedback-success {
            background: var(--success-bg) !important;
            color: white;
            font-weight: bold;
            transform: scale(1.08);
            box-shadow: 0 0 25px rgba(29, 185, 84, 0.8);
        }

        button.feedback-failure {
            background: var(--failure-bg) !important;
            color: white;
            font-weight: bold;
            transform: scale(1.08);
            box-shadow: 0 0 25px rgba(255, 68, 68, 0.8);
        }

        #info {
            text-align: left;
            font-size: 1.1rem;
            color: var(--primary);
            padding: 10px 0;
            grid-column: 1 / -1;
            min-height: 1.4em;
            font-weight: bold;
        }

        @media (max-width: 900px) {
            h1 { font-size: 1.8rem; }
            #clock { font-size: 2.6rem; }
        }

        @media (max-width: 480px) {
            header { padding: 16px 16px 10px 16px; }
            h1 { font-size: 1.6rem; }
            #clock { font-size: 2.3rem; }
            .container { padding: 12px 16px 16px 16px; padding-right: 0; }
            button { font-size: 1.1rem; padding: 14px; }
            button.large { padding: 18px; }
            button svg { width: 28px; height: 28px; }
        }
    </style>
</head>
<body>

    <header>
      <div class="header-inner">
        <div id="clock">---- </div>

        <div class="title-section">
          <h1>Nir's Media Station - bo√Æte petite üé∂</h1>
          <div id="now-playing" style="font-size: 1.05rem; color: #ddd;">
            <div id="np-track">
              <span class="np-track-text"></span>
            </div>

            <div id="np-meta" style="opacity: 0.85;"></div>
          </div>
        </div>
      </div>
    </header>

    <div class="container">
        <div class="panel">
            <h2>üîä Volume Control</h2>
            <button id="mute" class="large">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>
                Mute
            </button>
            <button id="low">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3z"/></svg>
                Low
            </button>
            <button id="medium">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3z"/></svg>
                Medium
            </button>
            <button id="high">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>
                High
            </button>
            <button id="superhigh" class="large">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                Max Blast
            </button>
        </div>

        <div class="panel waves">
            <h2>üåä Volume Waves (Keep Cats Awake üê±)</h2>
            <button id="enable-waves" class="large">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.97 5.26 2 8.39 2 12s1.97 6.74 5 7.74v-2.09c-2.33-.82-4-3.04-4-5.65zM7 12c0-1.47.8-2.74 2-3.44v-4.1C6.23 5.25 5 7.98 5 11s1.23 5.75 4 6.54v-4.1c-1.2-.7-2-1.97-2-3.44zm8.07-7.74l-1.41 1.41C15.88 7.13 17 9.18 17 12c0 2.82-1.12 4.87-3.34 6.33l1.41 1.41C17.76 18.05 19 15.27 19 12c0-3.27-1.24-6.05-3.93-7.74zM12 8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                Enable Waves
            </button>
            <button id="no-waves-two">
                No Waves for 2 Hours ‚è≥
            </button>
            <button id="no-waves">
                No Waves Today üìÖ
            </button>
        </div>

        <div class="panel source">
            <h2>üéº Source & Tracks</h2>
            <button id="spotify" class="large">

<?xml version="1.0" encoding="UTF-8"?>
<svg width="800px" height="800px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="#fff" fill-rule="evenodd">
        <g id="Logo" transform="translate(-720.000000, -96.000000)" fill-rule="nonzero">
            <g id="spotify_line" transform="translate(720.000000, 96.000000)">
                <path d="M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero">
</path>
                <path d="M12,2 C17.5228,2 22,6.47715 22,12 C22,17.5228 17.5228,22 12,22 C6.47715,22 2,17.5228 2,12 C2,6.47715 6.47715,2 12,2 Z M12,4 C7.58172,4 4,7.58172 4,12 C4,16.4183 7.58172,20 12,20 C16.4183,20 20,16.4183 20,12 C20,7.58172 16.4183,4 12,4 Z M7.72828,14.1113 C9.14617,13.7852 10.6632,13.7887 11.9748,13.9922 C13.2512,14.1903 14.4891,14.6025 15.2517,15.2256 C15.6794,15.575 15.7429,16.205 15.3935,16.6327 C15.0709769,17.0275 14.5093627,17.1119757 14.0884713,16.8478234 L13.9864,16.7745 C13.63,16.4833 12.8083,16.1455 11.6681,15.9686 C10.563,15.7971 9.30621,15.8006 8.17648,16.0604 C7.63824,16.1842 7.10158,15.8482 6.97781,15.3099 C6.85405,14.7717 7.19004,14.235 7.72828,14.1113 Z M7.20759,11.3799 C10.4666,10.4712 14.2588,10.9854 16.5709,12.4052 C17.0415,12.6942 17.1888,13.31 16.8998,13.7807 C16.6108,14.2513 15.995,14.3986 15.5243,14.1095 C13.7412,13.0146 10.5334,12.5288 7.74479,13.3064 C7.2128,13.4548 6.66128,13.1438 6.51294,12.6118 C6.36459,12.0798 6.6756,11.5283 7.20759,11.3799 Z M6.73115,8.51383 C10.4902,7.4646 14.2265,8.00853 17.3965,9.37757 C17.9035,9.59654 18.137,10.1851 17.918,10.6921 C17.6991,11.1991 17.1105,11.4326 16.6035,11.2137 C13.7735,9.99147 10.5098,9.53558 7.26885,10.4402 C6.73689,10.5887 6.1853,10.2778 6.03682,9.74586 C5.88834,9.21391 6.1992,8.66231 6.73115,8.51383 Z" fill="#fff">
</path>
            </g>
        </g>
    </g>
</svg>

Play Spotify
            </button>
            <button id="techno" class="large">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                Techno MP3s
            </button>
            <button id="spotify-reboot">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.5 2c-5.621 0-10.211 4.443-10.475 10h-3.025l5 5 5-5h-3c.264-4.411 4.077-8 8.5-8 4.688 0 8.5 3.812 8.5 8.5s-3.812 8.5-8.5 8.5c-3.257 0-6.094-1.833-7.562-4.5h-2.938c1.594 4.348 5.75 7.5 10.5 7.5 5.799 0 10.5-4.701 10.5-10.5s-4.701-10.5-10.5-10.5z"/></svg>
                Spotify Reboot (Temp + Return)
            </button>
            <button id="skip-track-now">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
                Skip Track Now
            </button>
        </div>

        <span id="info"></span>
    </div>

    <script>
        const infoElement = document.getElementById('info');
        let currentFeedbackButton = null;
        const FEEDBACK_DURATION = 3000;

        const observer = new MutationObserver(() => {
            const text = infoElement.textContent.trim().toLowerCase();

            if (text === '' && currentFeedbackButton) {
                restoreButton(currentFeedbackButton);
                currentFeedbackButton = null;
            } else if (text.includes('success') || text.includes('ok')) {
                applyFeedback('success');
            } else if (text.includes('fail') || text.includes('error')) {
                applyFeedback('failure');
            }
        });

        observer.observe(infoElement, { childList: true, subtree: true, characterData: true });

        document.querySelectorAll('button').forEach(btn => {
            btn.addEventListener('click', function() {
                if (currentFeedbackButton && currentFeedbackButton !== this) {
                    restoreButton(currentFeedbackButton);
                }
                currentFeedbackButton = this;
            });
        });

        function applyFeedback(type) {
            if (!currentFeedbackButton) return;

            currentFeedbackButton.classList.remove('feedback-success', 'feedback-failure');

            if (type === 'success') {
                currentFeedbackButton.classList.add('feedback-success');
                currentFeedbackButton.textContent = 'Success ‚úì';
            } else if (type === 'failure') {
                currentFeedbackButton.classList.add('feedback-failure');
                currentFeedbackButton.textContent = 'Failure ‚úó';
            }

            const svg = currentFeedbackButton.querySelector('svg');
            if (svg) svg.style.display = 'none';

            setTimeout(() => {
                if (currentFeedbackButton &&
                    (currentFeedbackButton.classList.contains('feedback-success') ||
                     currentFeedbackButton.classList.contains('feedback-failure'))) {
                    restoreButton(currentFeedbackButton);
                }
            }, FEEDBACK_DURATION + 200);
        }

        function restoreButton(btn) {
            btn.classList.remove('feedback-success', 'feedback-failure');
            btn.innerHTML = btn.dataset.originalContent || btn.innerHTML;
            const svg = btn.querySelector('svg');
            if (svg) svg.style.display = '';
        }

        document.querySelectorAll('button').forEach(btn => {
            btn.dataset.originalContent = btn.innerHTML;
        });
    </script>

    <script>
        // Bridge: if existing code writes into #np-track, move it into .np-track-text automatically
        (function () {
            const trackDiv = document.getElementById('np-track');
            const span = trackDiv && trackDiv.querySelector('.np-track-text');
            if (!trackDiv || !span) return;

            const sync = () => {
                if (span.textContent && span.textContent.trim()) return;

                const directText = Array.from(trackDiv.childNodes)
                    .filter(n => n.nodeType === Node.TEXT_NODE)
                    .map(n => n.textContent)
                    .join('')
                    .trim();

                if (directText) span.textContent = directText;
            };

            sync();
            new MutationObserver(sync).observe(trackDiv, { childList: true, characterData: true, subtree: true });
        })();
    </script>

    <script src="/script.js"></script>
</body>
</html>

